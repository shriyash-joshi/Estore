jQuery(document).ready(function(a){if("undefined"==typeof wc_price_based_country_pro_frontend_params)return!1;var o={products:{},refresh_addon_total:function(){var r=a("#product-addons-total").data("product-id");void 0!==r&&void 0!==this.products[r]&&(a("#product-addons-total").data("price",this.products[r].display_price),a("#product-addons-total").data("raw-price",this.products[r].raw_price))},refresh_price_per_unit:function(){a(".product.type-product").each(function(){if(void 0!==a(this).attr("id")){var r=a(this).attr("id").replace("product-","");if(void 0!==o.products[r]&&void 0!==o.products[r].price_per_unit_html){var e=a(o.products[r].price_per_unit_html);void 0!==a(this).find(".wgm-info.price-per-unit").first()&&a(this).find(".wgm-info.price-per-unit").first().html(e.html())}}})},refresh_bundled_items:function(){a(".bundle_data[data-bundle_id][data-bundle_price_data]").each(function(){var r=a(this).data("bundle_id");void 0!==o.products[r].bundle_price_data&&(a(this).data("bundle_price_data",o.products[r].bundle_price_data),"undefined"!=typeof wc_pb_bundle_scripts&&void 0!==wc_pb_bundle_scripts[r]&&(wc_pb_bundle_scripts[r].price_data=o.products[r].bundle_price_data,wc_pb_bundle_scripts[r].update_totals()))}),a(".bundled_product div[data-bundle_id][data-product_id]").each(function(){var r=a(this).data("bundle_id"),e=a(this).data("product_id");if(void 0!==o.products[r].bundled_items[e]){var t=o.products[r].bundled_items[e];$price_html=a("<div>"+t.price_html+"</div>").find(".wcpbc-price.wcpbc-price-"+t.id+":first"),"undefined"!=typeof $price_html&&a(this).find(".wcpbc-price.wcpbc-price-"+t.id).html($price_html.html()).removeClass("loading"),t.variations&&(a(this).data("product_variations",t.variations),a(this).trigger("reload_product_variations"))}})},refresh_name_your_price:function(){if(a("form.cart").find(".nyp").length){var r=a("form.cart").find(".nyp"),e=r.closest(".nyp-product.product");if(e.length){var t=e.attr("id").replace("product-","");if(void 0!==o.products[t]){var c=o.products[t];void 0!==c.min_price&&"undefined"!==c.max_price&&"undefined"!==c.suggested_price&&(r.data("min-price",c.min_price),r.data("max-price",c.max_price),r.data("price",c.suggested_price),r.find("input#nyp").first().attr("value",c.price_attr),r.find(".minimum-text").length&&r.find(".minimum-text").parent().html(c.min_price_html))}}if(a("form.variations_form").length){var i=a("form.variations_form").data("product_variations");null!=i&&(a.each(i,function(r,e){void 0!==o.products[e.variation_id]&&"undefined"!==o.products[e.variation_id].suggested_price&&(i[r].display_price=o.products[e.variation_id].suggested_price,i[r].display_regular_price=o.products[e.variation_id].suggested_price,i[r].maximum_price=o.products[e.variation_id].max_price,i[r].minimum_price=o.products[e.variation_id].min_price,i[r].minimum_price_html=o.products[e.variation_id].min_price_html)}),a("form.variations_form").data("product_variations",i))}}},german_market:{get_product_id:function(r){var e=!1,t=r.attr("class").match(/ wgm-pbc-info-\d+/i);if(0<t.length)e=t[0].replace(" wgm-pbc-info-","");return e},refresh:function(){a(".wgm-pbc-info.price-per-unit").each(function(){var r=o.german_market.get_product_id(a(this));if(void 0!==o.products[r]&&void 0!==o.products[r].price_per_unit_html){var e=a(o.products[r].price_per_unit_html);a(this).html(e.html())}}),a(".wgm-pbc-info.woocommerce-de_price_taxrate").each(function(){var r=o.german_market.get_product_id(a(this));if(void 0!==o.products[r]&&void 0!==o.products[r].text_including_tax){var e=a(o.products[r].text_including_tax);a(this).html(e.html())}})}},germanized:{refresh:function(){if(a(".wcpbc-gzd-price-unit").length&&(a.each(o.products,function(r,e){var t;void 0!==e.unit_price_html&&e.unit_price_html&&a(".wcpbc-gzd-price-unit-"+e.id).length&&(t=a("<div>"+e.unit_price_html+"</div>").find(".wcpbc-gzd-price-unit-"+e.id+":first"),a(".wcpbc-gzd-price-unit-"+e.id).html(t.html()))}),a("form.variations_form").length)){var t=a("form.variations_form").data("product_variations");null!=t&&(a.each(t,function(r,e){void 0!==o.products[e.variation_id]&&void 0!==o.products[e.variation_id].unit_price_html&&(t[r].unit_price=o.products[e.variation_id].unit_price_html)}),a("form.variations_form").data("product_variations",t))}}},refresh_name_your_price_currency:function(){if(a('label[for="nyp"]').length){var r=a('label[for="nyp"]').html().replace(wc_price_based_country_pro_frontend_params.currency_format_symbol,o.currency_params.symbol);a('label[for="nyp"]').html(r)}"undefined"!=typeof woocommerce_nyp_params&&(woocommerce_nyp_params.currency_format_symbol=o.currency_params.symbol,woocommerce_nyp_params.currency_format_num_decimals=o.currency_params.num_decimals,woocommerce_nyp_params.currency_format_decimal_sep=o.currency_params.decimal_sep,woocommerce_nyp_params.currency_format_thousand_sep=o.currency_params.thousand_sep,woocommerce_nyp_params.currency_format=o.currency_params.format)},refresh_addons_currency:function(){"undefined"!=typeof woocommerce_addons_params&&(woocommerce_addons_params.currency_format_num_decimals=o.currency_params.num_decimals,woocommerce_addons_params.currency_format_symbol=o.currency_params.symbol,woocommerce_addons_params.currency_format_decimal_sep=o.currency_params.decimal_sep,woocommerce_addons_params.currency_format_thousand_sep=o.currency_params.thousand_sep,woocommerce_addons_params.currency_format=o.currency_params.format,a(".cart:not(.cart_group)").trigger("woocommerce-product-addons-update"))},init:function(){a(document.body).on("wc_price_based_country_set_product_price",function(r,e){void 0!==e&&(o.products=e,o.refresh_addon_total(),o.refresh_price_per_unit(),o.refresh_bundled_items(),o.refresh_name_your_price(),o.german_market.refresh(),o.germanized.refresh())}),a(document.body).on("wc_price_based_country_set_currency_params",function(r,e){void 0!==e&&(o.currency_params=e,o.refresh_name_your_price_currency(),o.refresh_addons_currency(),wc_price_based_country_pro_frontend_params.currency_format_symbol=e.symbol,wc_price_based_country_pro_frontend_params.currency_format_num_decimals=e.num_decimals,wc_price_based_country_pro_frontend_params.currency_format_decimal_sep=e.decimal_sep,wc_price_based_country_pro_frontend_params.currency_format_thousand_sep=e.thousand_sep,wc_price_based_country_pro_frontend_params.currency_format=e.format)}),a(document.body).on("wc_price_based_country_after_ajax_geolocation",function(r,e){var t=e?"content-"+e:"no-zone";a(".wcpbc-content").hide(),a(".wcpbc-content."+t).show(),a(".wcpbc-content").addClass("refreshed"),0<a(".wc-pao-addon-image-swatch").length&&a(".wc-pao-addon-image-swatch").tipTip({delay:200})})}};o.init()});