var WPAC,Query=function(e){"use strict";function s(e){return e=(e=decodeURIComponent(e)).replace("+"," ")}function l(e,t){for(var o,n,r,i=[],l=0;l<c.length;l++)o=c[l],n=s(o[0])===s(e),r=s(o[1])===s(t),(1!==arguments.length||n)&&(2!==arguments.length||n||r)||i.push(o);return c=i,this}function a(e,t,o){return 3===arguments.length&&-1!==o?(o=Math.min(o,c.length),c.splice(o,0,[e,t])):0<arguments.length&&c.push([e,t]),this}var c=function(e){var t,o,n,r=[];if(null==e||""===e)return r;for(0===e.indexOf("?")&&(e=e.substring(1)),o=e.toString().split(/[&;]/),t=0;t<o.length;t++)n=o[t].split("="),r.push([n[0],n[1]]);return r}(e);return{getParamValue:function(e){for(var t,o=0;o<c.length;o++)if(t=c[o],s(e)===s(t[0]))return t[1]},getParamValues:function(e){for(var t,o=[],n=0;n<c.length;n++)t=c[n],s(e)===s(t[0])&&o.push(t[1]);return o},deleteParam:l,addParam:a,replaceParam:function(e,t,o){var n,r,i=-1;if(3===arguments.length){for(n=0;n<c.length;n++)if(r=c[n],s(r[0])===s(e)&&decodeURIComponent(r[1])===s(o)){i=n;break}l(e,o).addParam(e,t,i)}else{for(n=0;n<c.length;n++)if(r=c[n],s(r[0])===s(e)){i=n;break}l(e),a(e,t,i)}return this},toString:function(){for(var e,t="",o=0;o<c.length;o++)e=c[o],0<t.length&&(t+="&"),t+=e.join("=");return 0<t.length?"?"+t:t}}},Uri=function(e){"use strict";function o(e){return void 0!==e&&(u.protocol=e),u.protocol}function n(e){return void 0!==e&&(f=e),null===f?-1!==u.source.indexOf("//"):f}function r(e){return void 0!==e&&(u.userInfo=e),u.userInfo}function i(e){return void 0!==e&&(u.host=e),u.host}function l(e){return void 0!==e&&(u.port=e),u.port}function s(e){return void 0!==e&&(u.path=e),u.path}function a(e){return void 0!==e&&(d=new Query(e)),d}function c(e){return void 0!==e&&(u.anchor=e),u.anchor}function t(){function e(e){return null!==e&&""!==e}var t="";return e(o())?(t+=o(),o().indexOf(":")!==o().length-1&&(t+=":"),t+="//"):n()&&e(i())&&(t+="//"),e(r())&&e(i())&&(t+=r(),r().indexOf("@")!==r().length-1&&(t+="@")),e(i())&&(t+=i(),e(l())&&(t+=":"+l())),e(s())?t+=s():e(i())&&(e(a().toString())||e(c()))&&(t+="/"),e(a().toString())&&(0!==a().toString().indexOf("?")&&(t+="?"),t+=a().toString()),e(c())&&(0!==c().indexOf("#")&&(t+="#"),t+=c()),t}var u=function(e){for(var t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],n="queryKey",o=/(?:^|&)([^&=]*)=?([^&]*)/g,r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),i={},l=14;l--;)i[t[l]]=r[l]||"";return i[n]={},i[t[12]].replace(o,function(e,t,o){t&&(i[n][t]=o)}),i}(e||""),d=new Query(u.query),f=null;return{protocol:o,hasAuthorityPrefix:n,userInfo:r,host:i,port:l,path:s,query:a,anchor:c,setProtocol:function(e){return o(e),this},setHasAuthorityPrefix:function(e){return n(e),this},setUserInfo:function(e){return r(e),this},setHost:function(e){return i(e),this},setPort:function(e){return l(e),this},setPath:function(e){return s(e),this},setQuery:function(e){return a(e),this},setAnchor:function(e){return c(e),this},getQueryParamValue:function(e){return a().getParamValue(e)},getQueryParamValues:function(e){return a().getParamValues(e)},deleteQueryParam:function(e,t){return 2===arguments.length?a().deleteParam(e,t):a().deleteParam(e),this},addQueryParam:function(e,t,o){return 3===arguments.length?a().addParam(e,t,o):a().addParam(e,t),this},replaceQueryParam:function(e,t,o){return 3===arguments.length?a().replaceParam(e,t,o):a().replaceParam(e,t),this},toString:t,clone:function(){return new Uri(t())}}},jsUri=Uri;function wpac_init(){WPAC._Debug("info","wpac_init() is deprecated, please use WPAC.Init()"),WPAC.Init()}!function(){"use strict";function e(_){_.fn._fadeIn=_.fn.fadeIn;var w=_.noop||function(){},k=/MSIE/.test(navigator.userAgent),x=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),U=(document.documentMode,_.isFunction(document.createElement("div").style.setExpression));_.blockUI=function(e){o(window,e)},_.unblockUI=function(e){I(window,e)},_.growlUI=function(e,t,o,n){var r=_('<div class="growlUI"></div>');e&&r.append("<h1>"+e+"</h1>"),t&&r.append("<h2>"+t+"</h2>"),void 0===o&&(o=3e3);function i(e){e=e||{},_.blockUI({message:r,fadeIn:void 0!==e.fadeIn?e.fadeIn:700,fadeOut:void 0!==e.fadeOut?e.fadeOut:1e3,timeout:void 0!==e.timeout?e.timeout:o,centerY:!1,showOverlay:!1,onUnblock:n,css:_.blockUI.defaults.growlCSS})}i();r.css("opacity");r.mouseover(function(){i({fadeIn:0,timeout:3e4});var e=_(".blockMsg");e.stop(),e.fadeTo(300,1)}).mouseout(function(){_(".blockMsg").fadeOut(1e3)})},_.fn.block=function(e){if(this[0]===window)return _.blockUI(e),this;var t=_.extend({},_.blockUI.defaults,e||{});return this.each(function(){var e=_(this);t.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==_.css(this,"position")&&(this.style.position="relative",_(this).data("blockUI.static",!0)),this.style.zoom=1,o(this,e)})},_.fn.unblock=function(e){return this[0]===window?(_.unblockUI(e),this):this.each(function(){I(this,e)})},_.blockUI.version=2.6,_.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var S=null,O=[];function o(e,r){var t,o,n,i,l,s,a,c,u,d,f,p,m,h,C,b,g,y,P,A,W=e==window,v=r&&void 0!==r.message?r.message:void 0;(r=_.extend({},_.blockUI.defaults,r||{})).ignoreIfBlocked&&_(e).data("blockUI.isBlocked")||(r.overlayCSS=_.extend({},_.blockUI.defaults.overlayCSS,r.overlayCSS||{}),t=_.extend({},_.blockUI.defaults.css,r.css||{}),r.onOverlayClick&&(r.overlayCSS.cursor="pointer"),o=_.extend({},_.blockUI.defaults.themedCSS,r.themedCSS||{}),v=void 0===v?r.message:v,W&&S&&I(window,{fadeOut:0}),v&&"string"!=typeof v&&(v.parentNode||v.jquery)&&(n=v.jquery?v[0]:v,i={},_(e).data("blockUI.history",i),i.el=n,i.parent=n.parentNode,i.display=n.style.display,i.position=n.style.position,i.parent&&i.parent.removeChild(n)),_(e).data("blockUI.onUnblock",r.onUnblock),l=r.baseZ,c=k||r.forceIframe?_('<iframe class="blockUI" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+r.iframeSrc+'"></iframe>'):_('<div class="blockUI" style="display:none"></div>'),u=r.theme?_('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+l+++';display:none"></div>'):_('<div class="blockUI blockOverlay" style="z-index:'+l+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),r.theme&&W?(a='<div class="blockUI '+r.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:fixed">',r.title&&(a+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+"</div>"),a+='<div class="ui-widget-content ui-dialog-content"></div>',a+="</div>"):r.theme?(a='<div class="blockUI '+r.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:absolute">',r.title&&(a+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+"</div>"),a+='<div class="ui-widget-content ui-dialog-content"></div>',a+="</div>"):a=W?'<div class="blockUI '+r.blockMsgClass+' blockPage" style="z-index:'+(l+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+r.blockMsgClass+' blockElement" style="z-index:'+(l+10)+';display:none;position:absolute"></div>',s=_(a),v&&(r.theme?(s.css(o),s.addClass("ui-widget-content")):s.css(t)),r.theme||u.css(r.overlayCSS),u.css("position",W?"fixed":"absolute"),(k||r.forceIframe)&&c.css("opacity",0),d=[c,u,s],f=_(W?"body":e),_.each(d,function(){this.appendTo(f)}),r.theme&&r.draggable&&_.fn.draggable&&s.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),p=U&&(!_.support.boxModel||0<_("object,embed",W?null:e).length),(x||p)&&(W&&r.allowBodyStretch&&_.support.boxModel&&_("html,body").css("height","100%"),!x&&_.support.boxModel||W||(m=D(e,"borderTopWidth"),h=D(e,"borderLeftWidth"),C=m?"(0 - "+m+")":0,b=h?"(0 - "+h+")":0),_.each(d,function(e,t){var o,n=t[0].style;n.position="absolute",e<2?(W?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+r.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),W?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),b&&n.setExpression("left",b),C&&n.setExpression("top",C)):r.centerY?(W&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0):!r.centerY&&W&&(o="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(r.css&&r.css.top?parseInt(r.css.top,10):0)+') + "px"',n.setExpression("top",o))})),v&&(r.theme?s.find(".ui-widget-content").append(v):s.append(v),(v.jquery||v.nodeType)&&_(v).show()),(k||r.forceIframe)&&r.showOverlay&&c.show(),r.fadeIn?(g=r.onBlock?r.onBlock:w,y=r.showOverlay&&!v?g:w,P=v?g:w,r.showOverlay&&u._fadeIn(r.fadeIn,y),v&&s._fadeIn(r.fadeIn,P)):(r.showOverlay&&u.show(),v&&s.show(),r.onBlock&&r.onBlock()),T(1,e,r),W?(S=s[0],O=_(r.focusableElements,S),r.focusInput&&setTimeout(j,20)):function(e,t,o){var n=e.parentNode,r=e.style,i=(n.offsetWidth-e.offsetWidth)/2-D(n,"borderLeftWidth"),l=(n.offsetHeight-e.offsetHeight)/2-D(n,"borderTopWidth");t&&(r.left=0<i?i+"px":"0");o&&(r.top=0<l?l+"px":"0")}(s[0],r.centerX,r.centerY),r.timeout&&(A=setTimeout(function(){W?_.unblockUI(r):_(e).unblock(r)},r.timeout),_(e).data("blockUI.timeout",A)))}function I(e,t){var o,n,r=e==window,i=_(e),l=i.data("blockUI.history"),s=i.data("blockUI.timeout");s&&(clearTimeout(s),i.removeData("blockUI.timeout")),t=_.extend({},_.blockUI.defaults,t||{}),T(0,e,t),null===t.onUnblock&&(t.onUnblock=i.data("blockUI.onUnblock"),i.removeData("blockUI.onUnblock")),n=r?_("body").children().filter(".blockUI").add("body > .blockUI"):i.find(">.blockUI"),t.cursorReset&&(1<n.length&&(n[1].style.cursor=t.cursorReset),2<n.length&&(n[2].style.cursor=t.cursorReset)),r&&(S=O=null),t.fadeOut?(o=n.length,n.stop().fadeOut(t.fadeOut,function(){0==--o&&a(n,l,t,e)})):a(n,l,t,e)}function a(e,t,o,n){var r,i,l,s=_(n);s.data("blockUI.isBlocked")||(e.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),t&&t.el&&(t.el.style.display=t.display,t.el.style.position=t.position,t.parent&&t.parent.appendChild(t.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),"function"==typeof o.onUnblock&&o.onUnblock(n,o),i=(r=_(document.body)).width(),l=r[0].style.width,r.width(i-1).width(i),r[0].style.width=l)}function T(e,t,o){var n,r=t==window,i=_(t);!e&&(r&&!S||!r&&!i.data("blockUI.isBlocked"))||(i.data("blockUI.isBlocked",e),r&&o.bindEvents&&(!e||o.showOverlay)&&(n="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",e?_(document).bind(n,o,l):_(document).unbind(n,l)))}function l(e){if("keydown"===e.type&&e.keyCode&&9==e.keyCode&&S&&e.data.constrainTabKey){var t=!e.shiftKey&&e.target===O[O.length-1],o=e.shiftKey&&e.target===O[0];if(t||o)return setTimeout(function(){j(o)},10),!1}var n=e.data,r=_(e.target);return r.hasClass("blockOverlay")&&n.onOverlayClick&&n.onOverlayClick(),0<r.parents("div."+n.blockMsgClass).length||0===r.parents().children().filter("div.blockUI").length}function j(e){var t;!O||(t=O[!0===e?O.length-1:0])&&t.focus()}function D(e,t){return parseInt(_.css(e,t),10)||0}}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(),function(a){a.idleTimer=function(e,r,i){i=a.extend({startImmediately:!0,idle:!1,enabled:!0,timeout:3e4,events:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove"},i),r=r||document;var t,o,n=a(r),l=n.data("idleTimerObj")||{},s=function(e){"number"==typeof e&&(e=void 0);var t=a.data(e||r,"idleTimerObj");t.idle=!t.idle;var o=new Date-t.olddate;if(t.olddate=+new Date,t.idle&&o<i.timeout)return t.idle=!1,clearTimeout(a.idleTimer.tId),void(i.enabled&&(a.idleTimer.tId=setTimeout(s,i.timeout)));var n=a.Event(a.data(r,"idleTimer",t.idle?"idle":"active")+".idleTimer");a(r).trigger(n)};if(l.olddate=l.olddate||+new Date,"number"==typeof e)i.timeout=e;else{if("destroy"===e)return(o=(t=n).data("idleTimerObj")||{}).enabled=!1,clearTimeout(o.tId),t.off(".idleTimer"),this;if("getElapsedTime"===e)return new Date-l.olddate}n.on(a.trim((i.events+" ").split(" ").join(".idleTimer ")),function(){var e=a.data(this,"idleTimerObj");clearTimeout(e.tId),e.enabled&&(e.idle&&s(this),e.tId=setTimeout(s,e.timeout))}),l.idle=i.idle,l.enabled=i.enabled,l.timeout=i.timeout,i.startImmediately&&(l.tId=setTimeout(s,l.timeout)),n.data("idleTimer","active"),n.data("idleTimerObj",l)},a.fn.idleTimer=function(e,t){return t=t||{},this[0]&&a.idleTimer(e,this[0],t),this}}(jQuery),function(){var t,o,P=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},A=[].slice;t=this,o=function(a,i){var t,l,s,c,o,u,d,r,f,n,p,m,h,C,b,g;function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+o++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(u,this.id),d[this.id]=this,e.bind(m,function(){var e;if(!t.didScroll&&!r)return t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},i.setTimeout(e,a[g].settings.scrollThrottle)}),e.bind(p,function(){var e;if(!t.didResize)return t.didResize=!0,e=function(){return a[g]("refresh"),t.didResize=!1},i.setTimeout(e,a[g].settings.resizeThrottle)})}function y(e,t,o){var n,r;"bottom-in-view"===(o=a.extend({},a.fn[b].defaults,o)).offset&&(o.offset=function(){var e=a[g]("viewportHeight");return a.isWindow(t.element)||(e=t.$element.height()),e-a(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=o.horizontal?"horizontal":"vertical",this.callback=o.handler,this.context=t,this.enabled=o.enabled,this.id="waypoints"+h++,this.offset=null,this.options=o,t.waypoints[this.axis][this.id]=this,c[this.axis][this.id]=this,(n=null!=(r=e.data(C))?r:[]).push(this.id),e.data(C,n)}return t=a(i),r=0<=P.call(i,"ontouchstart"),c={horizontal:{},vertical:{}},d={},u="waypoints-context-id",p="resize.waypoints",m="scroll.waypoints",h=o=1,C="waypoints-waypoint-ids",b="waypoint",g="waypoints",e.prototype.doScroll=function(){var n=this,e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};return!r||e.vertical.oldScroll&&e.vertical.newScroll||a[g]("refresh"),a.each(e,function(e,r){var i=[],t=r.newScroll>r.oldScroll,o=t?r.forward:r.backward;return a.each(n.waypoints[e],function(e,t){var o,n;return r.oldScroll<(o=t.offset)&&o<=r.newScroll||r.newScroll<(n=t.offset)&&n<=r.oldScroll?i.push(t):void 0}),i.sort(function(e,t){return e.offset-t.offset}),t||i.reverse(),a.each(i,function(e,t){if(t.options.continuous||e===i.length-1)return t.trigger([o])})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t=this,o=a.isWindow(this.element),n=this.$element.offset();return this.doScroll(),e={horizontal:{contextOffset:o?0:n.left,contextScroll:o?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:o?0:n.top,contextScroll:o?0:this.oldScroll.y,contextDimension:o?a[g]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},a.each(e,function(e,s){return a.each(t.waypoints[e],function(e,t){var o,n,r=t.options.offset,i=t.offset,l=a.isWindow(t.element)?0:t.$element.offset()[s.offsetProp];if(a.isFunction(r)?r=r.apply(t.element):"string"==typeof r&&(r=parseFloat(r),-1<t.options.offset.indexOf("%")&&(r=Math.ceil(s.contextDimension*r/100))),t.offset=l-s.contextOffset+s.contextScroll-r,(!t.options.onlyOnScroll||null==i)&&t.enabled)return null!==i&&i<(o=s.oldScroll)&&o<=t.offset?t.trigger([s.backward]):null!==i&&i>(n=s.oldScroll)&&n>=t.offset||null===i&&s.oldScroll>=t.offset?t.trigger([s.forward]):void 0})})},e.prototype.checkEmpty=function(){if(a.isEmptyObject(this.waypoints.horizontal)&&a.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([p,m].join(" ")),delete d[this.id]},l=e,y.prototype.trigger=function(e){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0},y.prototype.disable=function(){return this.enabled=!1},y.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},y.prototype.destroy=function(){return delete c[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},y.getWaypointsByElement=function(e){var t,o=a(e).data(C);return o?(t=a.extend({},c.horizontal,c.vertical),a.map(o,function(e){return t[e]})):[]},s=y,n={init:function(e,r){return null==r&&(r={}),null==r.handler&&(r.handler=e),this.each(function(){var e,t,o=a(this),n=null!=(t=r.context)?t:a.fn[b].defaults.context;return a.isWindow(n)||(n=o.closest(n)),n=a(n),e=(e=d[n.data(u)])||new l(n),new s(o,e,r)}),a[g]("refresh"),this},disable:function(){return n._invoke(this,"disable")},enable:function(){return n._invoke(this,"enable")},destroy:function(){return n._invoke(this,"destroy")},prev:function(e,t){return n._traverse.call(this,e,t,function(e,t,o){if(0<t)return e.push(o[t-1])})},next:function(e,t){return n._traverse.call(this,e,t,function(e,t,o){if(t<o.length-1)return e.push(o[t+1])})},_traverse:function(t,e,o){var n,r;return null==t&&(t="vertical"),null==e&&(e=i),r=f.aggregate(e),n=[],this.each(function(){var e=a.inArray(this,r[t]);return o(n,e,r[t])}),this.pushStack(n)},_invoke:function(e,o){return e.each(function(){var e=s.getWaypointsByElement(this);return a.each(e,function(e,t){return t[o](),!0})}),this}},a.fn[b]=function(){var e=arguments[0],t=2<=arguments.length?A.call(arguments,1):[];return n[e]?n[e].apply(this,t):a.isFunction(e)?n.init.apply(this,arguments):a.isPlainObject(e)?n.init.apply(this,[null,e]):e?a.error("The "+e+" method does not exist in jQuery Waypoints."):a.error("jQuery Waypoints needs a callback function or handler option.")},a.fn[b].defaults={context:i,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},f={refresh:function(){return a.each(d,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=i.innerHeight)?e:t.height()},aggregate:function(e){var t,o,n=c;return e&&(n=null!=(o=d[a(e).data(u)])?o.waypoints:void 0),n?(t={horizontal:[],vertical:[]},a.each(t,function(e,o){return a.each(n[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),t[e]=a.map(o,function(e){return e.element}),t[e]=a.unique(t[e])}),t):[]},above:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=i),f._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=i),f._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return f._invoke("enable")},disable:function(){return f._invoke("disable")},destroy:function(){return f._invoke("destroy")},extendFn:function(e,t){return n[e]=t},_invoke:function(o){var e=a.extend({},c.vertical,c.horizontal);return a.each(e,function(e,t){return t[o](),!0})},_filter:function(e,t,o){var n,r=d[a(e).data(u)];return r?(n=[],a.each(r.waypoints[t],function(e,t){if(o(r,t))return n.push(t)}),n.sort(function(e,t){return e.offset-t.offset}),a.map(n,function(e){return e.element})):[]}},a[g]=function(){var e=arguments[0],t=2<=arguments.length?A.call(arguments,1):[];return f[e]?f[e].apply(null,t):f.aggregate.call(null,e)},a[g].settings={resizeThrottle:100,scrollThrottle:30},t.load(function(){return a[g]("refresh")})},"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(e){return o(e,t)}):o(t.jQuery,t)}.call(this),window.WPAC||(WPAC={}),WPAC._Options=WPAC._Options||{},WPAC._BodyRegex=new RegExp("<body[^>]*>((.|\n|\r)*)</body>","i"),WPAC._ExtractBody=function(e){try{return jQuery("<div>"+WPAC._BodyRegex.exec(e)[1]+"</div>")}catch(e){return!1}},WPAC._TitleRegex=new RegExp("<title[^>]*>(.*?)<\\/title>","im"),WPAC._ExtractTitle=function(e){try{return WPAC._TitleRegex.exec(e)[1]}catch(e){return!1}},WPAC._ShowMessage=function(e,t){var o=WPAC._Options.popupMarginTop+jQuery("#wpadminbar").outerHeight(),n=WPAC._Options.popupBackgroundColorLoading,r=WPAC._Options.popupTextColorLoading;"error"==t?(n=WPAC._Options.popupBackgroundColorError,r=WPAC._Options.popupTextColorError):"success"==t&&(n=WPAC._Options.popupBackgroundColorSuccess,r=WPAC._Options.popupTextColorSuccess),jQuery.blockUI({message:e,fadeIn:WPAC._Options.popupFadeIn,fadeOut:WPAC._Options.popupFadeOut,timeout:"loading"==t?0:WPAC._Options.popupTimeout,centerY:!1,centerX:!0,showOverlay:"loading"==t,css:{width:WPAC._Options.popupWidth+"%",left:(100-WPAC._Options.popupWidth)/2+"%",top:o+"px",border:"none",padding:WPAC._Options.popupPadding+"px",backgroundColor:n,"-webkit-border-radius":WPAC._Options.popupCornerRadius+"px","-moz-border-radius":WPAC._Options.popupCornerRadius+"px","border-radius":WPAC._Options.popupCornerRadius+"px",opacity:WPAC._Options.popupOpacity/100,color:r,textAlign:WPAC._Options.popupTextAlign,cursor:"loading"==t?"wait":"default","font-size":WPAC._Options.popupTextFontSize},overlayCSS:{backgroundColor:"#000",opacity:0},baseZ:WPAC._Options.popupZindex})},WPAC._DebugErrorShown=!1,WPAC._Debug=function(e,t){if(WPAC._Options.debug){if(Function.prototype.call&&Function.prototype.call.bind&&void 0!==window.console&&console&&"object"==typeof console.log&&void 0===window.console[e].apply&&(console[e]=Function.prototype.call.bind(console[e],console)),void 0===window.console||void 0===window.console[e]||void 0===window.console[e].apply)return WPAC._DebugErrorShown||alert("Unfortunately the console object is undefined or is not supported in your browser, debugging WP Ajaxify Comments is disabled! Please use Firebug, Google Chrome or Internet Explorer 9 or above with enabled Developer Tools (F12) for debugging WP Ajaxify Comments."),void(WPAC._DebugErrorShown=!0);var o=jQuery.merge(["[WP Ajaxify Comments] "+t],jQuery.makeArray(arguments).slice(2));console[e].apply(console,o)}},WPAC._DebugSelector=function(e,t,o){var n;WPAC._Options.debug&&((n=jQuery(t)).length?WPAC._Debug("info","Search %s (selector: '%s')... Found: %o",e,t,n):WPAC._Debug(o?"info":"error","Search %s (selector: '%s')... Not found",e,t))},WPAC._AddQueryParamStringToUrl=function(e,t,o){return new Uri(e).replaceQueryParam(t,o).toString()},WPAC._LoadFallbackUrl=function(e){WPAC._ShowMessage(WPAC._Options.textReloadPage,"loading");var t=WPAC._AddQueryParamStringToUrl(e,"WPACRandom",(new Date).getTime());WPAC._Debug("info","Something went wrong. Reloading page (URL: '%s')...",t);function o(){location.href=t}WPAC._Options.debug?(WPAC._Debug("info","Sleep for 5s to enable analyzing debug messages..."),window.setTimeout(o,5e3)):o()},WPAC._ScrollToAnchor=function(e,t,o){o=o||function(){};var n=jQuery(e);if(n.length){WPAC._Debug("info","Scroll to anchor element %o (scroll speed: %s ms)...",n,WPAC._Options.scrollSpeed);function r(){t&&(window.location.hash=e),o()}var i=n.offset().top;return jQuery(window).scrollTop()==i?r():jQuery("html,body").animate({scrollTop:i},{duration:WPAC._Options.scrollSpeed,complete:r}),!0}return WPAC._Debug("error","Anchor element not found (selector: '%s')",e),!1},WPAC._UpdateUrl=function(e){e.split("#")[0]!=window.location.href.split("#")[0]&&(window.history.replaceState?window.history.replaceState({},window.document.title,e):WPAC._Debug("info","Browser does not support window.history.replaceState() to update the URL without reloading the page",anchor))},WPAC._ReplaceComments=function(e,t,o,n,r,i,l,s,a,c,u){var d=o?WPAC._AddQueryParamStringToUrl(t,"WPACFallback","1"):t,f=jQuery(i);if(!f.length)return WPAC._Debug("error","Comment container on current page not found (selector: '%s')",i),WPAC._LoadFallbackUrl(d),!1;var p=WPAC._ExtractBody(e);if(!1===p)return WPAC._Debug("error","Unsupported server response, unable to extract body (data: '%s')",e),WPAC._LoadFallbackUrl(d),!1;a(p);var m=p.find(i);if(!m.length)return WPAC._Debug("error","Comment container on requested page not found (selector: '%s')",i),WPAC._LoadFallbackUrl(d),!1;c(p,t);var h=WPAC._ExtractTitle(e);if(!1!==p&&(document.title=jQuery("<textarea />").html(h).text()),f.replaceWith(m),WPAC._Options.commentsEnabled){var C,b=jQuery(l);if(b.length){if(!b.parents(i).length){WPAC._Debug("info","Replace comment form...");var g=p.find(l);if(0==g.length)return WPAC._Debug("error","Comment form on requested page not found (selector: '%s')",l),WPAC._LoadFallbackUrl(d),!1;b.replaceWith(g)}}else{WPAC._Debug("info","Try to re-inject comment form...");var y=jQuery("#wp-temp-form-div");if(!y.length)return WPAC._Debug("error","WordPress' #wp-temp-form-div container not found",s),WPAC._LoadFallbackUrl(d),!1;var P=p.find(s);if(!P.length)return WPAC._Debug("error","Respond container on requested page not found (selector: '%s')",s),WPAC._LoadFallbackUrl(d),!1;y.replaceWith(P)}n&&jQuery.each(n,function(e,t){var o=jQuery("[name='"+t.name+"']",l);1!=o.length||o.val()||o.val(t.value)}),!r||(C=jQuery("[name='"+r+"']",l))&&C.focus()}return u(p,t),!0},WPAC._TestCrossDomainScripting=function(e){if(0!=e.indexOf("http"))return!1;var t=window.location.protocol+"//"+window.location.host;return 0!=e.indexOf(t)},WPAC._TestFallbackUrl=function(e){return(e=new Uri(location.href)).getQueryParamValue("WPACFallback")&&e.getQueryParamValue("WPACRandom")},WPAC.AttachForm=function(l){var e;l=jQuery.extend({selectorCommentForm:WPAC._Options.selectorCommentForm,selectorCommentPagingLinks:WPAC._Options.selectorCommentPagingLinks,beforeSelectElements:WPAC._Callbacks.beforeSelectElements,beforeSubmitComment:WPAC._Callbacks.beforeSubmitComment,afterPostComment:WPAC._Callbacks.afterPostComment,selectorCommentsContainer:WPAC._Options.selectorCommentsContainer,selectorRespondContainer:WPAC._Options.selectorRespondContainer,beforeUpdateComments:WPAC._Callbacks.beforeUpdateComments,afterUpdateComments:WPAC._Callbacks.afterUpdateComments,scrollToAnchor:!WPAC._Options.disableScrollToAnchor,updateUrl:!WPAC._Options.disableUrlUpdate,selectorCommentLinks:WPAC._Options.selectorCommentLinks},l||{}),WPAC._Options.debug&&WPAC._Options.commentsEnabled&&(WPAC._Debug("info","Attach form..."),WPAC._DebugSelector("comment form",l.selectorCommentForm),WPAC._DebugSelector("comments container",l.selectorCommentsContainer),WPAC._DebugSelector("respond container",l.selectorRespondContainer),WPAC._DebugSelector("comment paging links",l.selectorCommentPagingLinks,!0),WPAC._DebugSelector("comment links",l.selectorCommentLinks,!0)),l.beforeSelectElements(jQuery(document));(e=jQuery(document).on?function(e,t,o){jQuery(document).on(e,t,o)}:jQuery(document).delegate?function(e,t,o){jQuery(document).delegate(t,e,o)}:function(e,t,o){jQuery(t).live(e,o)})("click",l.selectorCommentPagingLinks,function(e){var t=jQuery(this).attr("href");t&&(e.preventDefault(),WPAC.LoadComments(t,{selectorCommentForm:l.selectorCommentForm,selectorCommentsContainer:l.selectorCommentsContainer,selectorRespondContainer:l.selectorRespondContainer,beforeSelectElements:l.beforeSelectElements,beforeUpdateComments:l.beforeUpdateComments,afterUpdateComments:l.afterUpdateComments}))});e("click",l.selectorCommentLinks,function(e){var t,o,n=jQuery(this);n.is(l.selectorCommentPagingLinks)||(t=n.attr("href"),o="#"+new Uri(t).anchor(),0<jQuery(o).length&&(l.updateUrl&&WPAC._UpdateUrl(t),WPAC._ScrollToAnchor(o,l.updateUrl),e.preventDefault()))}),WPAC._Options.commentsEnabled&&e("submit",l.selectorCommentForm,function(e){var o=jQuery(this);l.beforeSubmitComment();var r,i,t=o.attr("action");WPAC._TestCrossDomainScripting(t)?WPAC._Options.debug&&!o.data("submitCrossDomain")&&(WPAC._Debug("error","Cross-domain scripting detected (submit url: '%s'), cancel AJAX request",t),WPAC._Debug("info","Sleep for 5s to enable analyzing debug messages..."),e.preventDefault(),o.data("submitCrossDomain",!0),window.setTimeout(function(){jQuery("#submit",o).remove(),o.submit()},5e3)):(e.preventDefault(),o.data("WPAC_SUBMITTING")?WPAC._Debug("info","Cancel submit, form is already submitting (Form: %o)",o):(o.data("WPAC_SUBMITTING",!0),WPAC._ShowMessage(WPAC._Options.textPostComment,"loading"),r=function(e){WPAC._Debug("info","Comment has not been posted"),WPAC._Debug("info","Try to extract error message (selector: '%s')...",WPAC._Options.selectorErrorContainer);var t=WPAC._ExtractBody(e);if(!1!==t){var o=t.find(WPAC._Options.selectorErrorContainer);if(o.length)return o=o.html(),WPAC._Debug("info","Error message '%s' successfully extracted",o),void WPAC._ShowMessage(o,"error")}WPAC._Debug("error","Error message could not be extracted, use error message '%s'.",WPAC._Options.textUnknownError),WPAC._ShowMessage(WPAC._Options.textUnknownError,"error")},i=jQuery.ajax({url:t,type:"POST",data:o.serialize(),beforeSend:function(e){e.setRequestHeader("X-WPAC-REQUEST","1")},complete:function(e,t){o.removeData("WPAC_SUBMITTING",!0)},success:function(e){if(i.getResponseHeader("X-WPAC-ERROR"))return WPAC._Debug("info","Found error state X-WPAC-ERROR header.",t),void r(e);WPAC._Debug("info","Comment has been posted");var t=i.getResponseHeader("X-WPAC-URL");WPAC._Debug("info","Found comment URL '%s' in X-WPAC-URL header.",t);var o,n=i.getResponseHeader("X-WPAC-UNAPPROVED");WPAC._Debug("info","Found unapproved state '%s' in X-WPAC-UNAPPROVED",n),l.afterPostComment(t,"1"==n),WPAC._ShowMessage("1"==n?WPAC._Options.textPostedUnapproved:WPAC._Options.textPosted,"success"),WPAC._ReplaceComments(e,t,!1,{},"",l.selectorCommentsContainer,l.selectorCommentForm,l.selectorRespondContainer,l.beforeSelectElements,l.beforeUpdateComments,l.afterUpdateComments)&&t&&(l.updateUrl&&WPAC._UpdateUrl(t),!l.scrollToAnchor||(o=0<=t.indexOf("#")?t.substr(t.indexOf("#")):null)&&(WPAC._Debug("info","Anchor '%s' extracted from comment URL '%s'",o,t),WPAC._ScrollToAnchor(o,l.updateUrl)))},error:function(e,t,o){if(0===e.status&&""===e.responseText)return WPAC._Debug("error","Comment seems to be posted, but loading comment update failed."),void WPAC._LoadFallbackUrl(WPAC._AddQueryParamStringToUrl(window.location.href,"WPACFallback","1"));r(e.responseText)}})))})},WPAC._Initialized=!1,WPAC.Init=function(){if(WPAC._Initialized)return WPAC._Debug("info","Abort initialization (plugin already initialized)"),!1;if(WPAC._Initialized=!0,!WPAC._Options||!WPAC._Callbacks)return WPAC._Debug("error","Something unexpected happened, initialization failed. Please try to reinstall the plugin."),!1;if(WPAC._Debug("info","Initializing version %s",WPAC._Options.version),WPAC._Options.debug){if(!jQuery||!jQuery.fn||!jQuery.fn.jquery)return WPAC._Debug("error","jQuery not found, abort initialization. Please try to reinstall the plugin."),!1;if(WPAC._Debug("info","Found jQuery %s",jQuery.fn.jquery),!jQuery.blockUI||!jQuery.blockUI.version)return WPAC._Debug("error","jQuery blockUI not found, abort initialization. Please try to reinstall the plugin."),!1;if(WPAC._Debug("info","Found jQuery blockUI %s",jQuery.blockUI.version),!jQuery.idleTimer)return WPAC._Debug("error","jQuery Idle Timer plugin not found, abort initialization. Please try to reinstall the plugin."),!1;WPAC._Debug("info","Found jQuery Idle Timer plugin")}return WPAC._Options.selectorPostContainer?(WPAC._Debug("info","Multiple comment form support enabled (selector: '%s')",WPAC._Options.selectorPostContainer),jQuery(WPAC._Options.selectorPostContainer).each(function(e,t){var o=jQuery(t).attr("id");o?WPAC.AttachForm({selectorCommentForm:"#"+o+" "+WPAC._Options.selectorCommentForm,selectorCommentPagingLinks:"#"+o+" "+WPAC._Options.selectorCommentPagingLinks,selectorCommentsContainer:"#"+o+" "+WPAC._Options.selectorCommentsContainer,selectorRespondContainer:"#"+o+" "+WPAC._Options.selectorRespondContainer}):WPAC._Debug("info","Skip post container element %o (ID not defined)",t)})):WPAC.AttachForm(),WPAC._Options.commentsEnabled&&0<WPAC._Options.autoUpdateIdleTime&&(WPAC._Debug("info","Auto updating comments enabled (idle time: %s)",WPAC._Options.autoUpdateIdleTime),WPAC._InitIdleTimer()),WPAC._Debug("info","Initialization completed"),!0},WPAC._OnIdle=function(){WPAC.RefreshComments({success:WPAC._InitIdleTimer,scrollToAnchor:!1})},WPAC._InitIdleTimer=function(){WPAC._TestFallbackUrl(location.href)?WPAC._Debug("error","Fallback URL was detected (url: '%s'), cancel init idle timer",location.href):(jQuery(document).idleTimer("destroy"),jQuery(document).idleTimer(WPAC._Options.autoUpdateIdleTime),jQuery(document).on("idle.idleTimer",WPAC._OnIdle))},WPAC.RefreshComments=function(e){var t=location.href;return WPAC._TestFallbackUrl(location.href)?(WPAC._Debug("error","Fallback URL was detected (url: '%s'), cancel AJAX request",t),!1):WPAC.LoadComments(t,e)},WPAC.LoadComments=function(n,r){if(WPAC._TestCrossDomainScripting(n))return WPAC._Debug("error","Cross-domain scripting detected (url: '%s'), cancel AJAX request",n),!1;"boolean"==typeof r&&(r={scrollToAnchor:r}),r=jQuery.extend({scrollToAnchor:!WPAC._Options.disableScrollToAnchor,showLoadingInfo:!0,updateUrl:!WPAC._Options.disableUrlUpdate,success:function(){},selectorCommentForm:WPAC._Options.selectorCommentForm,selectorCommentsContainer:WPAC._Options.selectorCommentsContainer,selectorRespondContainer:WPAC._Options.selectorRespondContainer,disableCache:WPAC._Options.disableCache,beforeSelectElements:WPAC._Callbacks.beforeSelectElements,beforeUpdateComments:WPAC._Callbacks.beforeUpdateComments,afterUpdateComments:WPAC._Callbacks.afterUpdateComments},r||{});var i=jQuery(r.selectorCommentForm).serializeArray(),l=document.activeElement?jQuery("[name='"+document.activeElement.name+"']",r.selectorCommentForm).attr("name"):"";r.showLoadingInfo&&WPAC._ShowMessage(WPAC._Options.textRefreshComments,"loading"),r.disableCache&&(n=WPAC._AddQueryParamStringToUrl(n,"WPACRandom",(new Date).getTime()));jQuery.ajax({url:n,type:"GET",beforeSend:function(e){e.setRequestHeader("X-WPAC-REQUEST","1")},success:function(e){var t,o;WPAC._ReplaceComments(e,n,!0,i,l,r.selectorCommentsContainer,r.selectorCommentForm,r.selectorRespondContainer,r.beforeSelectElements,r.beforeUpdateComments,r.afterUpdateComments)&&(r.updateUrl&&WPAC._UpdateUrl(n),t=!1,!r.scrollToAnchor||(o=0<=n.indexOf("#")?n.substr(n.indexOf("#")):null)&&(WPAC._Debug("info","Anchor '%s' extracted from url",o),WPAC._ScrollToAnchor(o,r.updateUrl,function(){r.success()})&&(t=!0)),jQuery.unblockUI(),t||r.success())},error:function(){WPAC._LoadFallbackUrl(WPAC._AddQueryParamStringToUrl(window.location.href,"WPACFallback","1"))}});return!0},jQuery(function(){var e=WPAC.Init();if(WPAC._Options.loadCommentsAsync){if(!e)return void WPAC._LoadFallbackUrl(WPAC._AddQueryParamStringToUrl(window.location.href,"WPACFallback","1"));var t=WPAC._Options.asyncLoadTrigger;WPAC._Debug("info","Loading comments asynchronously with secondary AJAX request (trigger: '%s')",t),window.location.hash&&(/^#comment-[0-9]+$/.test(window.location.hash)&&(WPAC._Debug("info","Comment anchor in URL detected, force loading comments on DomReady (hash: '%s')",window.location.hash),t="DomReady")),"Viewport"==t?jQuery(WPAC._Options.selectorCommentsContainer).waypoint(function(){jQuery(WPAC._Options.selectorCommentsContainer).waypoint("destroy"),WPAC.RefreshComments()},{offset:"100%"}):"DomReady"==t&&WPAC.RefreshComments({scrollToAnchor:!0})}});